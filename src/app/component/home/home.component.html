<main class="full-screen-container" fxLayoutGap="2rem" fxLayout="column">
  <form *ngIf="!mobileView" [formGroup]="placeSearchForm" 
        fxLayout="row wrap"
        fxLayoutGap="5px"
        fxLayoutAlign="start center">
    <mat-form-field appearance="outline">
      <mat-label>Longitude</mat-label>
      <input matInput type="number" formControlName="long">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Latitude</mat-label>
      <input matInput type="number" formControlName="lat">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Radius (meters)</mat-label>
      <input matInput type="number" formControlName="radius">
    </mat-form-field>

    <button fxFlex="nogrow" mat-raised-button color="primary" (click)="findPlaces()">Search</button>
    <button mat-raised-button color="primary" (click)="useCurrentLocation()">Use Current Location</button>
    
    <mat-divider></mat-divider>
  </form>

  <div fxFlex="grow" fxLayout="row" fxLayoutGap="2rem" fxLayoutAlign="start stretch">
    <!-- list of place cards -->
    <div *ngIf="(displayView != 'List' && mobileView) || !mobileView" style="overflow: scroll" fxFlex="300px" fxFlexlt-sm="100" fxLayout="column" fxLayoutGap="1rem">
      <mat-card *ngFor="let place of places | async" style="width: 100%; margin: 1rem;">
        <mat-card-header [ngStyle]="{ 'background-image': 'url(' + place.image + ')'}">
        </mat-card-header>
        <mat-card-content>
          <mat-card-title>{{place.name}}</mat-card-title>
          <mat-chip-list>
            <mat-chip color="accent" selected *ngFor="let type of place.types">{{type}}</mat-chip>
          </mat-chip-list>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button (click)="savePlace(place.place_id)">SAVE</button>
        </mat-card-actions>
      </mat-card>
    </div>

    <!-- map -->
    <div *ngIf="(displayView != 'Map' && mobileView) || !mobileView" fxFlex="grow" fxFlex.lt-sm="100">
      <agm-map [zoom]="15" [latitude]="lat" [longitude]="long">
        <agm-marker [latitude]="lat" [longitude]="long"></agm-marker>
        <agm-marker *ngFor="let place of places | async"
          [latitude]="place.lat" 
          [longitude]="place.long">
        </agm-marker>
      </agm-map>
    </div>
  </div>

  <div *ngIf="mobileView" style="position: absolute; padding: 1rem; bottom: 0; left: 0; width: 100%; text-align: center">
    <button mat-raised-button color="accent" (click)="toggleView()">{{displayView}}</button>
  </div>
</main>